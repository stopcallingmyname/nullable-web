<p-toast position="top-left"></p-toast>
<video
  class="hidden md:block h-full w-full object-cover absolute opacity-70"
  muted
  loop
  playsinline
  autoplay
  src="https://cdn.dribbble.com/users/721278/screenshots/14007533/media/baf08042bd923f2612151585e163af6d.mp4"
></video>
<section
  class="flex flex-col md:grid md:grid-cols-2 items-center justify-center md:justify-items-center w-full h-screen bg-pink-100"
>
  <div
    class="flex flex-col items-center col-start-2 rounded-2xl xs:rounded-3xl p-4 xs:px-10 xs:py-7 bg-white opacity-80 gap-3 xs:gap-4 w-fit"
  >
    <div class="flex flex-col w-full gap-2 xs:gap-1">
      <div
        class="flex flex-row w-full content-between items-center justify-between"
      >
        <a
          routerLink="/"
          class="font-LotaGrotesque text-lg font-semibold xs:text-xl hover:opacity-90 transition-opacity ease-in-out"
        >
          <span class="text-red-600 text-xl">.</span>Nullable
        </a>
        <a
          class="text-blue-600 font-LotaGrotesque font-medium text-xs grid text-end"
          routerLink="/session"
        >
          <span>Have an account?</span>
          <span>Sign in</span>
        </a>
      </div>
      <h1 class="text-4xl xs:text-5xl font-bold font-LotaGrotesque">Sign up</h1>
    </div>

    <div class="flex flex-col items-start w-full content-start">
      <form
        [formGroup]="registrationForm"
        (ngSubmit)="onSubmitRegister()"
        class="flex flex-col gap-3 w-full"
      >
        <fieldset class="flex flex-col gap-2 w-full">
          <label
            class="font-IBMPlexMono font-semibold text-sm text-gray-500 flex flex-row items-center gap-2"
            for="username"
            ><span>Username</span>
            @if (formControls['username'].invalid && (isFormSubmitted ||
            formControls['username'].touched || formControls['username'].dirty))
            { @if (formControls['username'].errors?.['required']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Username can't be blank"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            } @else if (formControls['username'].errors?.['pattern']){
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Username may only contain A-Z, 0-9, underscores, and dashes"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            } @else if (formControls['username'].errors?.['minlength']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Username is too short"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            } @else if (formControls['username'].errors?.['maxlength']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Username is too long"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            }}
          </label>
          <input
            formControlName="username"
            class="ring-[1.5px] ring-[#e7e7e9] hover:shadow-[0_0_0_5px_rgba(234,100,217,0.1)] focus:shadow-[0_0_0_5px_rgba(234,100,217,0.1)] font-IBMPlexMono font-normal leading-6 xs:leading-7 text-base xs:text-lg w-full h-fit rounded-lg xs:rounded-xl px-4 xs:px-5 py-2 xs:py-3 transition-all duration-200 ease-in-out"
            type="text"
          />
        </fieldset>
        <fieldset class="flex flex-col gap-2 w-full">
          <label
            class="font-IBMPlexMono font-semibold text-sm text-gray-500 flex flex-row items-center gap-2"
            for="email"
            ><span>Email</span>
            @if (formControls['email'].invalid && (isFormSubmitted ||
            formControls['email'].touched || formControls['email'].dirty)) { @if
            (formControls['email'].errors?.['required']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Email can't be blank"
              tooltipPosition="left"
              fitContent="true"
              autoHide="false"
              positionLeft="-8"
            ></ng-icon>
            } @else if (formControls['email'].errors?.['email'] ||
            formControls['email'].errors?.['pattern']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Email must be a valid email address"
              tooltipPosition="left"
              fitContent="true"
              autoHide="false"
              positionLeft="-8"
            ></ng-icon>
            } }
          </label>
          <input
            formControlName="email"
            class="ring-[1.5px] ring-[#e7e7e9] hover:shadow-[0_0_0_5px_rgba(234,100,217,0.1)] focus:shadow-[0_0_0_5px_rgba(234,100,217,0.1)] font-IBMPlexMono font-normal leading-6 xs:leading-7 text-base xs:text-lg w-full h-fit rounded-lg xs:rounded-xl px-4 xs:px-5 py-2 xs:py-3 transition-all duration-200 ease-in-out"
            type="email"
          />
        </fieldset>
        <fieldset class="flex flex-col gap-2 w-full">
          <label
            class="font-IBMPlexMono font-semibold text-sm text-gray-500 flex flex-row items-center gap-2"
            for="password"
            ><span>Password</span>
            @if (formControls['password'].invalid && (isFormSubmitted ||
            formControls['password'].touched || formControls['password'].dirty))
            { @if (formControls['password'].errors?.['required']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Password can't be blank"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            } @else if (formControls['password'].errors?.['minlength']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Password is too short"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            } @else if (formControls['password'].errors?.['maxlength']) {
            <ng-icon
              class="text-red-400"
              name="octAlertFill"
              pTooltip="Password is too long â€” give the hackers at least a chance :)"
              tooltipPosition="right"
              fitContent="true"
              autoHide="false"
              positionLeft="8"
            ></ng-icon>
            }}
          </label>
          <input
            formControlName="password"
            class="ring-[1.5px] ring-[#e7e7e9] hover:shadow-[0_0_0_5px_rgba(234,100,217,0.1)] focus:shadow-[0_0_0_5px_rgba(234,100,217,0.1)] font-IBMPlexMono font-normal leading-6 xs:leading-7 text-base xs:text-lg w-full h-fit rounded-lg xs:rounded-xl px-4 xs:px-5 py-2 xs:py-3 transition-all duration-200 ease-in-out"
            type="password"
          />
        </fieldset>
        <div class="mt-2 flex flex-row gap-4 items-center content-center">
          <button
            type="submit"
            class="font-LotaGrotesque font-semibold w-fit text-white bg-gray-950 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 rounded-lg text-xs px-10 py-3 dark:bg-gray-950 dark:hover:bg-gray-900 dark:focus:ring-gray-700 dark:border-gray-700 disabled:bg-gray-700 transition-all duration-200 ease-in-out"
          >
            Sign Up
          </button>
          <div #googleBtnDiv id="google-btn-div"></div>
        </div>
      </form>
    </div>
  </div>
</section>
